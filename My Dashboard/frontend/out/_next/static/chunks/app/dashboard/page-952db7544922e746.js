(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{51484:function(e,t,a){Promise.resolve().then(a.bind(a,97813))},97813:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var r=a(57437),s=a(2265);function l(e){let{title:t,value:a,icon:s,trend:l,trendValue:d}=e;return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:t}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a}),d&&(0,r.jsxs)("p",{className:"text-xs mt-2 ".concat("up"===l?"text-green-600":"text-red-600"),children:["up"===l?"↑":"↓"," ",d]})]}),s&&(0,r.jsx)("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg text-blue-600 dark:text-blue-300",children:s})]})})}var d=a(29116),o=a(47625),i=a(75169),n=a(3574),c=a(20407),u=a(8147),g=a(77031),h=a(56940),x=a(97059),m=a(62994),p=a(31699),y=a(15001),b=a(48736),f=a(71769),v=a(97418),j=a(58896),N=a(40257);function k(){let[e,t]=(0,s.useState)(null),[a,k]=(0,s.useState)(!0),[w,C]=(0,s.useState)([]),[S,_]=(0,s.useState)(""),[T,L]=(0,s.useState)([]),[A,I]=(0,s.useState)(!1),[P,V]=(0,s.useState)(null),[U,E]=(0,s.useState)(!1),O=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("lc_cv");if(e)try{V(JSON.parse(e))}catch(e){V(null)}},[]);let D=async e=>{if(!e)return;let t=new FormData;t.append("file",e),E(!0);try{let e=(await d.sC.uploadCV(t)).data.data;V(e),localStorage.setItem("lc_cv",JSON.stringify(e)),alert("CV uploaded")}catch(t){var a,r,s;console.error("CV upload failed",t);let e=(null==t?void 0:null===(r=t.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||(null==t?void 0:t.message)||String(t);(null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.status)===401||/no token/i.test(e)?alert("CV upload failed: You must be logged in to upload a CV. Please login and try again."):alert("CV upload failed: "+e)}finally{E(!1)}};(0,s.useEffect)(()=>{(async()=>{try{let e=await d.Tm.getDashboardStats();t(e.data.data),e.data.data&&C([{name:"Certifications",value:e.data.data.certCount},{name:"Degrees",value:e.data.data.degreeCount},{name:"Goals",value:e.data.data.upcomingGoals}])}catch(e){console.error("Failed to fetch stats:",e)}finally{k(!1)}})()},[]);let Z=async()=>{if(!S||0===S.trim().length){L([]);return}I(!0);try{let e=S.toLowerCase(),[t,a,r,s]=await Promise.all([d.VT.getAll().catch(()=>({data:{data:[]}})),d.Bi.getAll().catch(()=>({data:{data:[]}})),d.P$.getAll().catch(()=>({data:{data:[]}})),d.Tm.getAll().catch(()=>({data:{data:[]}}))]),l=t.data.data||[],o=a.data.data||[],i=r.data.data||[],n=s.data.data||[],c=localStorage.getItem("lc_notes"),u=c?JSON.parse(c):[],g=[];l.forEach(t=>{((t.title||"").toLowerCase().includes(e)||(t.organization||"").toLowerCase().includes(e))&&g.push({type:"Certification",title:t.title,id:t._id})}),o.forEach(t=>{((t.degreeName||"").toLowerCase().includes(e)||(t.university||"").toLowerCase().includes(e))&&g.push({type:"Degree",title:t.degreeName,id:t._id})}),i.forEach(t=>{(t.task||"").toLowerCase().includes(e)&&g.push({type:"Todo",title:t.task,id:t._id})}),n.forEach(t=>{((t.title||"").toLowerCase().includes(e)||(t.description||"").toLowerCase().includes(e))&&g.push({type:"Goal",title:t.title,id:t._id})}),u.forEach(t=>{((t.title||"").toLowerCase().includes(e)||(t.content||"").toLowerCase().includes(e))&&g.push({type:"Note",title:t.title,id:t.id})}),L(g.slice(0,50))}catch(e){console.error("Unified search failed",e)}finally{I(!1)}};if(a)return(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsx)(y.Z,{className:"w-8 h-8 animate-spin text-blue-600"})});let R=["#3b82f6","#8b5cf6","#ec4899"];return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Welcome back! Here's your productivity overview."}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("div",{className:"max-w-xl",children:[(0,r.jsx)("label",{className:"sr-only",children:"Search all"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"search",value:S,onChange:e=>_(e.target.value),placeholder:"Search certifications, degrees, todos, goals, notes...",className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Z())}}),(0,r.jsx)("button",{onClick:()=>void Z(),className:"absolute right-1 top-1 bottom-1 px-3 rounded-r-lg bg-blue-600 text-white","aria-label":"Search",children:"Search"})]}),A&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Searching..."}),T.length>0&&(0,r.jsxs)("div",{className:"mt-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-3",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:"Results"}),(0,r.jsx)("ul",{className:"space-y-2 max-h-56 overflow-y-auto",children:T.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-gray-800 dark:text-gray-200",children:[(0,r.jsx)("span",{className:"font-medium",children:e.title}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",e.type,")"]})]},t))})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(l,{title:"Certifications",value:(null==e?void 0:e.certCount)||0,icon:(0,r.jsx)(b.Z,{className:"w-6 h-6"})}),(0,r.jsx)(l,{title:"Degrees",value:(null==e?void 0:e.degreeCount)||0,icon:(0,r.jsx)(f.Z,{className:"w-6 h-6"})}),(0,r.jsx)(l,{title:"Tasks Completed",value:"".concat((null==e?void 0:e.completedTodos)||0,"/").concat((null==e?void 0:e.totalTodos)||0),icon:(0,r.jsx)(v.Z,{className:"w-6 h-6"})}),(0,r.jsx)(l,{title:"Upcoming Goals",value:(null==e?void 0:e.upcomingGoals)||0,icon:(0,r.jsx)(j.Z,{className:"w-6 h-6"})})]}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Resume / CV"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Upload your latest CV so it can be easily shared or downloaded."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[P?(0,r.jsx)("a",{href:(e=>{if(!e)return"";if(/^https?:\/\//.test(e))return e;let t="";try{t=d.ZP&&d.ZP.defaults&&d.ZP.defaults.baseURL||""}catch(e){t=""}let a=(t||N.env.NEXT_PUBLIC_API_URL||"https://lifetrackdashboard.onrender.com").replace(/\/$/,"");return a.endsWith("/api")&&(a=a.slice(0,-4)),"".concat(a).concat(e)})(P.fileUrl),target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-gray-50 dark:bg-gray-800 rounded-md text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"View CV"}):(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"No CV uploaded"}),(0,r.jsx)("input",{ref:O,type:"file",accept:"application/pdf",className:"hidden",onChange:e=>{var t;return D((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,r.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.click()},className:"px-3 py-2 bg-blue-600 text-white rounded-md",children:U?"Uploading...":"Upload CV"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Overview"}),(0,r.jsx)(o.h,{width:"100%",height:300,children:(0,r.jsxs)(i.u,{children:[(0,r.jsx)(n.b,{data:w,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a)},outerRadius:80,fill:"#8884d8",dataKey:"value",children:w.map((e,t)=>(0,r.jsx)(c.b,{fill:R[t%R.length]},"cell-".concat(t)))}),(0,r.jsx)(u.u,{})]})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Statistics"}),(0,r.jsx)(o.h,{width:"100%",height:300,children:(0,r.jsxs)(g.v,{data:w,children:[(0,r.jsx)(h.q,{strokeDasharray:"3 3"}),(0,r.jsx)(x.K,{dataKey:"name"}),(0,r.jsx)(m.B,{}),(0,r.jsx)(u.u,{}),(0,r.jsx)(p.$,{dataKey:"value",fill:"#3b82f6"})]})})]})]}),(null==e?void 0:e.todaysTodos)&&e.todaysTodos.length>0&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Today's Tasks"}),(0,r.jsx)("div",{className:"space-y-2",children:e.todaysTodos.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsx)("input",{type:"checkbox",className:"w-4 h-4"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.task}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Priority: ",e.priority]})]}),(0,r.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded",children:e.status})]},e._id))})]})]})}},29116:function(e,t,a){"use strict";a.d(t,{Bi:function(){return c},P$:function(){return u},Tm:function(){return g},VT:function(){return n},kv:function(){return o},sC:function(){return i}});var r=a(83464),s=a(42097);let l=a(40257).env.NEXT_PUBLIC_API_URL||"https://lifetrackdashboard.onrender.com/api",d=r.Z.create({baseURL:l});d.interceptors.request.use(e=>{let t=s.t.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let o={register:e=>d.post("/auth/register",e),login:e=>d.post("/auth/login",e),getMe:()=>d.get("/auth/me"),updateProfile:e=>d.put("/auth/profile",e)},i={uploadCV:e=>d.post("/uploads/cv",e,{headers:{"Content-Type":"multipart/form-data"}})},n={getAll:()=>d.get("/certs"),getOne:e=>d.get("/certs/".concat(e)),create:e=>d.post("/certs",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>d.put("/certs/".concat(e),t),delete:e=>d.delete("/certs/".concat(e))},c={getAll:()=>d.get("/degrees"),getOne:e=>d.get("/degrees/".concat(e)),create:e=>e instanceof FormData?d.post("/degrees",e,{headers:{"Content-Type":"multipart/form-data"}}):d.post("/degrees",e),update:(e,t)=>t instanceof FormData?d.put("/degrees/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}):d.put("/degrees/".concat(e),t),delete:e=>d.delete("/degrees/".concat(e))},u={getAll:e=>d.get("/todos",{params:e}),getOne:e=>d.get("/todos/".concat(e)),create:e=>d.post("/todos",e),update:(e,t)=>d.put("/todos/".concat(e),t),delete:e=>d.delete("/todos/".concat(e))},g={getAll:()=>d.get("/goals"),getOne:e=>d.get("/goals/".concat(e)),create:e=>d.post("/goals",e),update:(e,t)=>d.put("/goals/".concat(e),t),delete:e=>d.delete("/goals/".concat(e)),getDashboardStats:()=>d.get("/goals/dashboard/stats")};t.ZP=d},42097:function(e,t,a){"use strict";a.d(t,{t:function(){return r}});let r=(0,a(59625).Ue)(e=>({user:JSON.parse(localStorage.getItem("user")||"null"),token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),setAuth:(t,a)=>{localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a),e({user:t,token:a,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>{e(e=>{let a={...e.user,...t};return localStorage.setItem("user",JSON.stringify(a)),{user:a}})}}))}},function(e){e.O(0,[42,34,971,117,744],function(){return e(e.s=51484)}),_N_E=e.O()}]);