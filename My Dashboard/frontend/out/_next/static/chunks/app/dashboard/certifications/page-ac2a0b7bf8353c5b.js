(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{89785:function(e,t,a){Promise.resolve().then(a.bind(a,83931))},83931:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(57437),s=a(2265),i=a(29116),n=a(25523),l=a(23404),o=a(88476),d=a(99397),c=a(48736),u=a(42208),g=a(18930),x=a(73281);function m(){let[e,t]=(0,s.useState)([]),[a,m]=(0,s.useState)(!0),[y,h]=(0,s.useState)(!1),[p,b]=(0,s.useState)(!1),[f,v]=(0,s.useState)(null),[j,k]=(0,s.useState)(null),[N,w]=(0,s.useState)({title:"",organization:"",issueDate:"",expiryDate:""}),[D,C]=(0,s.useState)(null),[S,z]=(0,s.useState)("");(0,s.useEffect)(()=>{Z()},[]);let Z=async()=>{try{let e=await i.VT.getAll();t(e.data.data)}catch(e){console.error("Failed to fetch certifications:",e)}finally{m(!1)}},T=async a=>{a.preventDefault();try{if(j)await i.VT.update(j,N),t(e.map(e=>e._id===j?{...e,...N}:e));else{let a=new FormData;a.append("title",N.title),a.append("organization",N.organization),a.append("issueDate",N.issueDate),N.expiryDate&&a.append("expiryDate",N.expiryDate),D&&a.append("file",D);let r=await i.VT.create(a);t([r.data.data,...e])}M(),h(!1)}catch(e){console.error("Failed to save certification:",e),alert("Failed to save certification")}},_=async a=>{if(confirm("Are you sure?"))try{await i.VT.delete(a),t(e.filter(e=>e._id!==a))}catch(e){console.error("Failed to delete:",e)}},A=e=>{k(e._id),w({title:e.title,organization:e.organization,issueDate:e.issueDate.split("T")[0],expiryDate:e.expiryDate?e.expiryDate.split("T")[0]:""}),h(!0)},M=()=>{w({title:"",organization:"",issueDate:"",expiryDate:""}),C(null),k(null)},I=()=>{if(!S||""===S.trim())return e;let t=S.toLowerCase();return e.filter(e=>(e.title||"").toLowerCase().includes(t)||(e.organization||"").toLowerCase().includes(t))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Certifications"}),(0,r.jsx)("div",{className:"mt-3 max-w-md",children:(0,r.jsx)("input",{type:"search",value:S,onChange:e=>z(e.target.value),placeholder:"Search certifications...",className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})})]}),(0,r.jsx)("div",{children:(0,r.jsxs)(n.z,{onClick:()=>{M(),h(!0)},className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4"}),"Add Certification"]})})]}),a?(0,r.jsx)("div",{children:"Loading..."}):0===I().length?(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-12 text-center",children:[(0,r.jsx)(c.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No certifications yet. Add one to get started!"})]}):(0,r.jsx)("div",{className:"grid gap-4",children:I().map(e=>(0,r.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-100 dark:border-gray-800 p-5 shadow-sm hover:shadow-lg transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:e.organization}),(0,r.jsxs)("div",{className:"flex gap-4 mt-3 text-sm text-gray-500 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:["Issued: ",(0,x.Z)(new Date(e.issueDate),"MMM d, yyyy")]}),e.expiryDate&&(0,r.jsxs)("span",{children:["Expires: ",(0,x.Z)(new Date(e.expiryDate),"MMM d, yyyy")]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>{v(e),b(!0)},title:"Preview",className:"p-2 bg-gray-50 dark:bg-gray-800 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent hover:border-gray-200 transition",children:(0,r.jsx)(u.Z,{className:"w-4 h-4 text-gray-700 dark:text-gray-200"})}),(0,r.jsx)("button",{onClick:()=>A(e),title:"Edit",className:"px-3 py-2 bg-gray-50 dark:bg-gray-800 rounded-md text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent hover:border-gray-200 transition",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>_(e._id),title:"Delete",className:"p-2 bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition",children:(0,r.jsx)(g.Z,{className:"w-4 h-4"})})]})]})},e._id))}),(0,r.jsx)(l.u,{isOpen:y,onClose:()=>{h(!1),M()},title:j?"Edit Certification":"Add Certification",children:(0,r.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Title *"}),(0,r.jsx)("input",{type:"text",value:N.title,onChange:e=>w({...N,title:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Organization *"}),(0,r.jsx)("input",{type:"text",value:N.organization,onChange:e=>w({...N,organization:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Issue Date *"}),(0,r.jsx)("input",{type:"date",value:N.issueDate,onChange:e=>w({...N,issueDate:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Expiry Date"}),(0,r.jsx)("input",{type:"date",value:N.expiryDate,onChange:e=>w({...N,expiryDate:e.target.value})})]}),!j&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"File (PDF/Image)"}),(0,r.jsx)("input",{type:"file",accept:".pdf,image/*",onChange:e=>{var t;return C((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(n.z,{type:"submit",className:"flex-1",children:"Save"}),(0,r.jsx)(n.z,{type:"button",variant:"secondary",onClick:()=>{h(!1),M()},className:"flex-1",children:"Cancel"})]})]})}),(0,r.jsx)(o.M,{isOpen:p,onClose:()=>b(!1),title:(null==f?void 0:f.title)||"Preview",content:[{label:"Organization",value:null==f?void 0:f.organization},{label:"Issued Date",value:f?(0,x.Z)(new Date(f.issueDate),"MMM d, yyyy"):void 0},{label:"Expiry Date",value:(null==f?void 0:f.expiryDate)?(0,x.Z)(new Date(f.expiryDate),"MMM d, yyyy"):"No expiry"}],fileUrl:null==f?void 0:f.fileUrl,fileName:null==f?void 0:f.fileName,fileType:null==f?void 0:f.fileType})]})}},25523:function(e,t,a){"use strict";a.d(t,{z:function(){return s}});var r=a(57437);function s(e){let{variant:t="primary",isLoading:a,children:s,...i}=e;return(0,r.jsx)("button",{...i,disabled:a||i.disabled,className:"".concat("px-4 py-2 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",danger:"bg-red-600 text-white hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800"}[t]," ").concat(i.className||""),children:a?"Loading...":s})}},23404:function(e,t,a){"use strict";a.d(t,{u:function(){return i}});var r=a(57437),s=a(32489);function i(e){let{isOpen:t,onClose:a,title:i,children:n}=e;return t?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:a}),(0,r.jsxs)("div",{className:"relative bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-md p-6 m-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:i}),(0,r.jsx)("button",{onClick:a,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition",children:(0,r.jsx)(s.Z,{className:"w-5 h-5"})})]}),n]})]}):null}},88476:function(e,t,a){"use strict";a.d(t,{M:function(){return l}});var r=a(57437),s=a(23404),i=a(29116),n=a(40257);function l(e){let{isOpen:t,onClose:a,title:l="Preview",content:o=[],fileUrl:d,fileName:c,fileType:u}=e,g=i.ZP&&i.ZP.defaults&&i.ZP.defaults.baseURL?i.ZP.defaults.baseURL.replace(/\/api$/,""):n.env.NEXT_PUBLIC_API_URL||window.location.origin,x=d?"".concat(g).concat(d):null,m=u&&u.startsWith("image/");return(0,r.jsx)(s.u,{isOpen:t,onClose:a,title:l,children:(0,r.jsxs)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[o.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e.label}),(0,r.jsx)("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-900 p-2 rounded",children:e.value||"â€”"})]},t)),d&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Attachment"}),m?(0,r.jsx)("div",{className:"rounded overflow-hidden max-h-64",children:(0,r.jsx)("img",{src:x,alt:c||"attachment",className:"w-full h-auto object-contain"})}):(0,r.jsxs)("a",{href:x,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800 transition text-sm",children:["\uD83D\uDCC4 ",c||"View File"]})]})]})})}},29116:function(e,t,a){"use strict";a.d(t,{Bi:function(){return c},P$:function(){return u},Tm:function(){return g},VT:function(){return d},kv:function(){return l},sC:function(){return o}});var r=a(83464),s=a(42097);let i=a(40257).env.NEXT_PUBLIC_API_URL||"https://lifetrackdashboard.onrender.com/api",n=r.Z.create({baseURL:i});n.interceptors.request.use(e=>{let t=s.t.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let l={register:e=>n.post("/auth/register",e),login:e=>n.post("/auth/login",e),getMe:()=>n.get("/auth/me"),updateProfile:e=>n.put("/auth/profile",e)},o={uploadCV:e=>n.post("/uploads/cv",e,{headers:{"Content-Type":"multipart/form-data"}})},d={getAll:()=>n.get("/certs"),getOne:e=>n.get("/certs/".concat(e)),create:e=>n.post("/certs",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>n.put("/certs/".concat(e),t),delete:e=>n.delete("/certs/".concat(e))},c={getAll:()=>n.get("/degrees"),getOne:e=>n.get("/degrees/".concat(e)),create:e=>e instanceof FormData?n.post("/degrees",e,{headers:{"Content-Type":"multipart/form-data"}}):n.post("/degrees",e),update:(e,t)=>t instanceof FormData?n.put("/degrees/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}):n.put("/degrees/".concat(e),t),delete:e=>n.delete("/degrees/".concat(e))},u={getAll:e=>n.get("/todos",{params:e}),getOne:e=>n.get("/todos/".concat(e)),create:e=>n.post("/todos",e),update:(e,t)=>n.put("/todos/".concat(e),t),delete:e=>n.delete("/todos/".concat(e))},g={getAll:()=>n.get("/goals"),getOne:e=>n.get("/goals/".concat(e)),create:e=>n.post("/goals",e),update:(e,t)=>n.put("/goals/".concat(e),t),delete:e=>n.delete("/goals/".concat(e)),getDashboardStats:()=>n.get("/goals/dashboard/stats")};t.ZP=n},42097:function(e,t,a){"use strict";a.d(t,{t:function(){return r}});let r=(0,a(59625).Ue)(e=>({user:JSON.parse(localStorage.getItem("user")||"null"),token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),setAuth:(t,a)=>{localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a),e({user:t,token:a,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>{e(e=>{let a={...e.user,...t};return localStorage.setItem("user",JSON.stringify(a)),{user:a}})}}))},42208:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},48736:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])}},function(e){e.O(0,[42,855,971,117,744],function(){return e(e.s=89785)}),_N_E=e.O()}]);