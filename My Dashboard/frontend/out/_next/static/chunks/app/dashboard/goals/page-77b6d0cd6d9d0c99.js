(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[806],{55318:function(e,t,a){Promise.resolve().then(a.bind(a,80120))},80120:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(57437),r=a(2265),l=a(29116),n=a(25523),i=a(23404),c=a(99397),d=a(58896),o=a(42208),u=a(18930),g=a(73281);function m(){let[e,t]=(0,r.useState)([]),[a,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)(!1),[p,y]=(0,r.useState)(!1),[b,f]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[k,N]=(0,r.useState)({title:"",description:"",targetDate:"",milestones:[]}),[w,C]=(0,r.useState)(""),[S,A]=(0,r.useState)("");(0,r.useEffect)(()=>{T()},[]);let T=async()=>{try{let e=await l.Tm.getAll();t(e.data.data)}catch(e){console.error("Failed to fetch goals:",e)}finally{m(!1)}},D=async a=>{a.preventDefault();try{if(v)await l.Tm.update(v,k),t(e.map(e=>e._id===v?{...e,...k}:e));else{let a=await l.Tm.create(k);t([a.data.data,...e])}E(),h(!1)}catch(e){console.error("Failed to save goal:",e),alert("Failed to save goal")}},_=async a=>{if(confirm("Are you sure?"))try{await l.Tm.delete(a),t(e.filter(e=>e._id!==a))}catch(e){console.error("Failed to delete:",e)}},Z=e=>{j(e._id),N({title:e.title,description:e.description||"",targetDate:e.targetDate.split("T")[0],milestones:e.milestones}),h(!0)},z=()=>{w.trim()&&(N({...k,milestones:[...k.milestones,{text:w,completed:!1}]}),C(""))},I=e=>{N({...k,milestones:k.milestones.filter((t,a)=>a!==e)})},O=e=>{let t=[...k.milestones];t[e].completed=!t[e].completed,N({...k,milestones:t})},E=()=>{N({title:"",description:"",targetDate:"",milestones:[]}),C(""),j(null)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Goals"}),(0,s.jsx)("div",{className:"mt-3 max-w-md",children:(0,s.jsx)("input",{type:"search",value:S,onChange:e=>A(e.target.value),placeholder:"Search goals...",className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})})]}),(0,s.jsx)("div",{children:(0,s.jsxs)(n.z,{onClick:()=>{E(),h(!0)},className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"Add Goal"]})})]}),a?(0,s.jsx)("div",{children:"Loading..."}):0===e.length?(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-12 text-center",children:[(0,s.jsx)(d.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No goals yet. Add one to get started!"})]}):(0,s.jsx)("div",{className:"grid gap-4",children:(()=>{if(!S||""===S.trim())return e;let t=S.toLowerCase();return e.filter(e=>(e.title||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t))})().map(e=>(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.title}),e.description&&(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:e.description}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:["Target: ",(0,g.Z)(new Date(e.targetDate),"MMM d, yyyy")]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{f(e),y(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700 rounded-lg transition",title:"Preview",children:(0,s.jsx)(o.Z,{className:"w-4 h-4"})}),(0,s.jsx)(n.z,{variant:"secondary",onClick:()=>Z(e),className:"text-sm",children:"Edit"}),(0,s.jsx)(n.z,{variant:"danger",onClick:()=>_(e._id),className:"text-sm",children:(0,s.jsx)(u.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Progress"}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e.progress,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(e.progress,"%")}})})]}),e.milestones&&e.milestones.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Milestones"}),(0,s.jsx)("div",{className:"space-y-2",children:e.milestones.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.completed,disabled:!0,className:"w-4 h-4"}),(0,s.jsx)("span",{className:e.completed?"line-through text-gray-500":"",children:e.text})]},t))})]})]},e._id))}),(0,s.jsx)(i.u,{isOpen:x,onClose:()=>{h(!1),E()},title:v?"Edit Goal":"Add Goal",children:(0,s.jsxs)("form",{onSubmit:D,className:"space-y-4 max-h-96 overflow-y-auto",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Title *"}),(0,s.jsx)("input",{type:"text",value:k.title,onChange:e=>N({...k,title:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,s.jsx)("textarea",{value:k.description,onChange:e=>N({...k,description:e.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600",rows:2})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Target Date *"}),(0,s.jsx)("input",{type:"date",value:k.targetDate,onChange:e=>N({...k,targetDate:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Milestones"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Add milestone...",value:w,onChange:e=>C(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),z())}),(0,s.jsx)(n.z,{type:"button",onClick:z,className:"text-sm",children:"Add"})]}),k.milestones.length>0&&(0,s.jsx)("div",{className:"space-y-2",children:k.milestones.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>O(t),className:"w-4 h-4"}),(0,s.jsx)("span",{className:"flex-1",children:e.text}),(0,s.jsx)("button",{type:"button",onClick:()=>I(t),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},t))})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(n.z,{type:"submit",className:"flex-1",children:"Save"}),(0,s.jsx)(n.z,{type:"button",variant:"secondary",onClick:()=>{h(!1),E()},className:"flex-1",children:"Cancel"})]})]})})]})}},25523:function(e,t,a){"use strict";a.d(t,{z:function(){return r}});var s=a(57437);function r(e){let{variant:t="primary",isLoading:a,children:r,...l}=e;return(0,s.jsx)("button",{...l,disabled:a||l.disabled,className:"".concat("px-4 py-2 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",danger:"bg-red-600 text-white hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800"}[t]," ").concat(l.className||""),children:a?"Loading...":r})}},23404:function(e,t,a){"use strict";a.d(t,{u:function(){return l}});var s=a(57437),r=a(32489);function l(e){let{isOpen:t,onClose:a,title:l,children:n}=e;return t?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:a}),(0,s.jsxs)("div",{className:"relative bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-md p-6 m-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l}),(0,s.jsx)("button",{onClick:a,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition",children:(0,s.jsx)(r.Z,{className:"w-5 h-5"})})]}),n]})]}):null}},29116:function(e,t,a){"use strict";a.d(t,{Bi:function(){return o},P$:function(){return u},Tm:function(){return g},VT:function(){return d},kv:function(){return i},sC:function(){return c}});var s=a(83464),r=a(42097);let l=a(40257).env.NEXT_PUBLIC_API_URL||"https://lifetrackdashboard.onrender.com/api",n=s.Z.create({baseURL:l});n.interceptors.request.use(e=>{let t=r.t.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let i={register:e=>n.post("/auth/register",e),login:e=>n.post("/auth/login",e),getMe:()=>n.get("/auth/me"),updateProfile:e=>n.put("/auth/profile",e)},c={uploadCV:e=>n.post("/uploads/cv",e,{headers:{"Content-Type":"multipart/form-data"}})},d={getAll:()=>n.get("/certs"),getOne:e=>n.get("/certs/".concat(e)),create:e=>n.post("/certs",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>n.put("/certs/".concat(e),t),delete:e=>n.delete("/certs/".concat(e))},o={getAll:()=>n.get("/degrees"),getOne:e=>n.get("/degrees/".concat(e)),create:e=>e instanceof FormData?n.post("/degrees",e,{headers:{"Content-Type":"multipart/form-data"}}):n.post("/degrees",e),update:(e,t)=>t instanceof FormData?n.put("/degrees/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}):n.put("/degrees/".concat(e),t),delete:e=>n.delete("/degrees/".concat(e))},u={getAll:e=>n.get("/todos",{params:e}),getOne:e=>n.get("/todos/".concat(e)),create:e=>n.post("/todos",e),update:(e,t)=>n.put("/todos/".concat(e),t),delete:e=>n.delete("/todos/".concat(e))},g={getAll:()=>n.get("/goals"),getOne:e=>n.get("/goals/".concat(e)),create:e=>n.post("/goals",e),update:(e,t)=>n.put("/goals/".concat(e),t),delete:e=>n.delete("/goals/".concat(e)),getDashboardStats:()=>n.get("/goals/dashboard/stats")};t.ZP=n},42097:function(e,t,a){"use strict";a.d(t,{t:function(){return s}});let s=(0,a(59625).Ue)(e=>({user:JSON.parse(localStorage.getItem("user")||"null"),token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),setAuth:(t,a)=>{localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a),e({user:t,token:a,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>{e(e=>{let a={...e.user,...t};return localStorage.setItem("user",JSON.stringify(a)),{user:a}})}}))},42208:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(39763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},58896:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(39763).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])}},function(e){e.O(0,[42,855,971,117,744],function(){return e(e.s=55318)}),_N_E=e.O()}]);