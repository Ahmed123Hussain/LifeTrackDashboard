(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[136],{85224:function(e,t,a){Promise.resolve().then(a.bind(a,51821))},51821:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(57437),s=a(2265),l=a(29116),n=a(25523),i=a(23404),d=a(88476),o=a(99397),c=a(71769),u=a(42208),g=a(18930),m=a(73281);function x(){var e;let[t,a]=(0,s.useState)([]),[x,h]=(0,s.useState)(!0),[p,b]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[f,j]=(0,s.useState)(null),[N,k]=(0,s.useState)(null),[w,D]=(0,s.useState)({degreeName:"",university:"",startDate:"",endDate:"",gpa:"",notes:""}),[C,S]=(0,s.useState)(null),[U,P]=(0,s.useState)(null),[Z,A]=(0,s.useState)("");(0,s.useEffect)(()=>{L()},[]);let L=async()=>{try{let e=await l.Bi.getAll();a(e.data.data)}catch(e){console.error("Failed to fetch degrees:",e)}finally{h(!1)}},_=async e=>{e.preventDefault();try{let e={degreeName:w.degreeName,university:w.university,startDate:w.startDate,endDate:w.endDate,...w.gpa&&{gpa:parseFloat(w.gpa)},...w.notes&&{notes:w.notes}};if(C){let r=new FormData;if(r.append("degreeName",e.degreeName),r.append("university",e.university),r.append("startDate",e.startDate),r.append("endDate",e.endDate),void 0!==e.gpa&&r.append("gpa",String(e.gpa)),void 0!==e.notes&&r.append("notes",String(e.notes)),r.append("file",C),N){let e=await l.Bi.update(N,r);a(t.map(t=>t._id===N?e.data.data:t))}else{let e=await l.Bi.create(r);a([e.data.data,...t])}}else if(N)await l.Bi.update(N,e),a(t.map(t=>t._id===N?{...t,...e}:t));else{let r=await l.Bi.create(e);a([r.data.data,...t])}T(),b(!1)}catch(e){console.error("Failed to save degree:",e),alert("Failed to save degree")}},M=async e=>{if(confirm("Are you sure?"))try{await l.Bi.delete(e),a(t.filter(t=>t._id!==e))}catch(e){console.error("Failed to delete:",e)}},O=e=>{var t;k(e._id),D({degreeName:e.degreeName,university:e.university,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],gpa:(null===(t=e.gpa)||void 0===t?void 0:t.toString())||"",notes:e.notes||""}),S(null),e.fileUrl&&e.fileType&&e.fileType.startsWith("image/")?P("".concat((l.ZP.defaults.baseURL||"").replace(/\/api$/,"")).concat(e.fileUrl)):P(null),b(!0)},T=()=>{D({degreeName:"",university:"",startDate:"",endDate:"",gpa:"",notes:""}),k(null),S(null),U&&(URL.revokeObjectURL(U),P(null))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Degrees & Education"}),(0,r.jsx)("div",{className:"mt-3 max-w-md",children:(0,r.jsx)("input",{type:"search",value:Z,onChange:e=>A(e.target.value),placeholder:"Search degrees...",className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})})]}),(0,r.jsx)("div",{children:(0,r.jsxs)(n.z,{onClick:()=>{T(),b(!0)},className:"flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"Add Degree"]})})]}),x?(0,r.jsx)("div",{children:"Loading..."}):0===t.length?(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-12 text-center",children:[(0,r.jsx)(c.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No degrees yet. Add one to get started!"})]}):(0,r.jsx)("div",{className:"grid gap-4",children:(()=>{if(!Z||""===Z.trim())return t;let e=Z.toLowerCase();return t.filter(t=>(t.degreeName||"").toLowerCase().includes(e)||(t.university||"").toLowerCase().includes(e))})().map(e=>(0,r.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl border border-gray-100 dark:border-gray-800 p-5 shadow-sm hover:shadow-lg transition-shadow duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[e.fileUrl&&(0,r.jsx)("div",{className:"w-20 h-20 flex-shrink-0 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:e.fileType&&e.fileType.startsWith("image/")?(0,r.jsx)("img",{src:"".concat((l.ZP.defaults.baseURL||"").replace(/\/api$/,"")).concat(e.fileUrl),alt:e.fileName||"attachment",className:"w-full h-full object-cover"}):(0,r.jsx)("a",{href:"".concat((l.ZP.defaults.baseURL||"").replace(/\/api$/,"")).concat(e.fileUrl),target:"_blank",rel:"noreferrer",className:"text-sm text-blue-600 dark:text-blue-400",children:"View PDF"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.degreeName}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:e.university}),(0,r.jsxs)("div",{className:"flex gap-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:[(0,m.Z)(new Date(e.startDate),"MMM yyyy")," -"," ",(0,m.Z)(new Date(e.endDate),"MMM yyyy")]}),e.gpa&&(0,r.jsxs)("span",{children:["GPA: ",e.gpa]})]}),e.notes&&(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:e.notes})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>{j(e),v(!0)},title:"Preview",className:"p-2 bg-gray-50 dark:bg-gray-800 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent hover:border-gray-200 transition",children:(0,r.jsx)(u.Z,{className:"w-4 h-4 text-gray-700 dark:text-gray-200"})}),(0,r.jsx)("button",{onClick:()=>O(e),title:"Edit",className:"px-3 py-2 bg-gray-50 dark:bg-gray-800 rounded-md text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent hover:border-gray-200 transition",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>M(e._id),title:"Delete",className:"p-2 bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition",children:(0,r.jsx)(g.Z,{className:"w-4 h-4"})})]})]})},e._id))}),(0,r.jsx)(i.u,{isOpen:p,onClose:()=>{b(!1),T()},title:N?"Edit Degree":"Add Degree",children:(0,r.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Degree Name *"}),(0,r.jsx)("input",{type:"text",value:w.degreeName,onChange:e=>D({...w,degreeName:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"University *"}),(0,r.jsx)("input",{type:"text",value:w.university,onChange:e=>D({...w,university:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Start Date *"}),(0,r.jsx)("input",{type:"date",value:w.startDate,onChange:e=>D({...w,startDate:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"End Date *"}),(0,r.jsx)("input",{type:"date",value:w.endDate,onChange:e=>D({...w,endDate:e.target.value}),required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"GPA"}),(0,r.jsx)("input",{type:"number",step:"0.01",min:"0",max:"4",value:w.gpa,onChange:e=>D({...w,gpa:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),(0,r.jsx)("textarea",{value:w.notes,onChange:e=>D({...w,notes:e.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600",rows:3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Attachment (PDF or Image)"}),(0,r.jsx)("input",{type:"file",accept:"application/pdf,image/*",onChange:e=>{var t;let a=(null===(t=e.target.files)||void 0===t?void 0:t[0])||null;S(a),a&&a.type.startsWith("image/")?P(URL.createObjectURL(a)):(U&&URL.revokeObjectURL(U),P(null))}}),U&&(0,r.jsx)("div",{className:"mt-2 w-32 h-32 rounded overflow-hidden",children:(0,r.jsx)("img",{src:U,alt:"preview",className:"w-full h-full object-cover"})})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(n.z,{type:"submit",className:"flex-1",children:"Save"}),(0,r.jsx)(n.z,{type:"button",variant:"secondary",onClick:()=>{b(!1),T()},className:"flex-1",children:"Cancel"})]})]})}),(0,r.jsx)(d.M,{isOpen:y,onClose:()=>v(!1),title:(null==f?void 0:f.degreeName)||"Preview",content:[{label:"University",value:null==f?void 0:f.university},{label:"Start Date",value:f?(0,m.Z)(new Date(f.startDate),"MMM yyyy"):void 0},{label:"End Date",value:f?(0,m.Z)(new Date(f.endDate),"MMM yyyy"):void 0},{label:"GPA",value:null==f?void 0:null===(e=f.gpa)||void 0===e?void 0:e.toString()},{label:"Notes",value:null==f?void 0:f.notes}],fileUrl:null==f?void 0:f.fileUrl,fileName:null==f?void 0:f.fileName,fileType:null==f?void 0:f.fileType})]})}},25523:function(e,t,a){"use strict";a.d(t,{z:function(){return s}});var r=a(57437);function s(e){let{variant:t="primary",isLoading:a,children:s,...l}=e;return(0,r.jsx)("button",{...l,disabled:a||l.disabled,className:"".concat("px-4 py-2 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",danger:"bg-red-600 text-white hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800"}[t]," ").concat(l.className||""),children:a?"Loading...":s})}},23404:function(e,t,a){"use strict";a.d(t,{u:function(){return l}});var r=a(57437),s=a(32489);function l(e){let{isOpen:t,onClose:a,title:l,children:n}=e;return t?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:a}),(0,r.jsxs)("div",{className:"relative bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-md p-6 m-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l}),(0,r.jsx)("button",{onClick:a,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition",children:(0,r.jsx)(s.Z,{className:"w-5 h-5"})})]}),n]})]}):null}},88476:function(e,t,a){"use strict";a.d(t,{M:function(){return i}});var r=a(57437),s=a(23404),l=a(29116),n=a(40257);function i(e){let{isOpen:t,onClose:a,title:i="Preview",content:d=[],fileUrl:o,fileName:c,fileType:u}=e,g=l.ZP&&l.ZP.defaults&&l.ZP.defaults.baseURL?l.ZP.defaults.baseURL.replace(/\/api$/,""):n.env.NEXT_PUBLIC_API_URL||window.location.origin,m=o?"".concat(g).concat(o):null,x=u&&u.startsWith("image/");return(0,r.jsx)(s.u,{isOpen:t,onClose:a,title:i,children:(0,r.jsxs)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[d.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e.label}),(0,r.jsx)("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-900 p-2 rounded",children:e.value||"â€”"})]},t)),o&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Attachment"}),x?(0,r.jsx)("div",{className:"rounded overflow-hidden max-h-64",children:(0,r.jsx)("img",{src:m,alt:c||"attachment",className:"w-full h-auto object-contain"})}):(0,r.jsxs)("a",{href:m,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800 transition text-sm",children:["\uD83D\uDCC4 ",c||"View File"]})]})]})})}},29116:function(e,t,a){"use strict";a.d(t,{Bi:function(){return c},P$:function(){return u},Tm:function(){return g},VT:function(){return o},kv:function(){return i},sC:function(){return d}});var r=a(83464),s=a(42097);let l=a(40257).env.NEXT_PUBLIC_API_URL||"https://lifetrackdashboard.onrender.com/api",n=r.Z.create({baseURL:l});n.interceptors.request.use(e=>{let t=s.t.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let i={register:e=>n.post("/auth/register",e),login:e=>n.post("/auth/login",e),getMe:()=>n.get("/auth/me"),updateProfile:e=>n.put("/auth/profile",e)},d={uploadCV:e=>n.post("/uploads/cv",e,{headers:{"Content-Type":"multipart/form-data"}})},o={getAll:()=>n.get("/certs"),getOne:e=>n.get("/certs/".concat(e)),create:e=>n.post("/certs",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>n.put("/certs/".concat(e),t),delete:e=>n.delete("/certs/".concat(e))},c={getAll:()=>n.get("/degrees"),getOne:e=>n.get("/degrees/".concat(e)),create:e=>e instanceof FormData?n.post("/degrees",e,{headers:{"Content-Type":"multipart/form-data"}}):n.post("/degrees",e),update:(e,t)=>t instanceof FormData?n.put("/degrees/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}):n.put("/degrees/".concat(e),t),delete:e=>n.delete("/degrees/".concat(e))},u={getAll:e=>n.get("/todos",{params:e}),getOne:e=>n.get("/todos/".concat(e)),create:e=>n.post("/todos",e),update:(e,t)=>n.put("/todos/".concat(e),t),delete:e=>n.delete("/todos/".concat(e))},g={getAll:()=>n.get("/goals"),getOne:e=>n.get("/goals/".concat(e)),create:e=>n.post("/goals",e),update:(e,t)=>n.put("/goals/".concat(e),t),delete:e=>n.delete("/goals/".concat(e)),getDashboardStats:()=>n.get("/goals/dashboard/stats")};t.ZP=n},42097:function(e,t,a){"use strict";a.d(t,{t:function(){return r}});let r=(0,a(59625).Ue)(e=>({user:JSON.parse(localStorage.getItem("user")||"null"),token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),setAuth:(t,a)=>{localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a),e({user:t,token:a,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>{e(e=>{let a={...e.user,...t};return localStorage.setItem("user",JSON.stringify(a)),{user:a}})}}))},71769:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},42208:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(39763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},function(e){e.O(0,[42,855,971,117,744],function(){return e(e.s=85224)}),_N_E=e.O()}]);